<!doctype html>
<html>
<head>
    <meta charset="utf-8">

    <title>An invite for Cabble app.</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0, maximum-scale=1.0" />
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            padding: 1em;
            margin: 0;
        }
    </style>

    <link rel="preconnect" href="https://fonts.googleapis.com">

    <!-- implement javascript on web page that first first tries to open the deep link
        1. if user has app installed, then they would be redirected to open the app to specified screen
        2. if user doesn't have app installed, then their browser wouldn't recognize the URL scheme
        and app wouldn't open since it's not installed. In 1 second (1000 milliseconds) user is redirected
        to download app from app store.
     -->
    <script>
      (function() {
        var inviteCode = location.search.match(/inviteCode=([^&]+)/);
        if (inviteCode === null) {
          return;
        }

        var inviteUrl = 'cabble://invite.redeem/' + inviteCode[1];

        window.onload = function() {
          window.location = inviteUrl;

          const codeForm = document.getElementById('code-form');

          codeForm.action = inviteUrl;
          codeForm.style = 'display: block; margin-top: 1em;';

          setTimeout("window.location = 'https://www.cabbleapp.com/';", 2000);
        }
      })()
    </script>
</head>
<body>

<p>
    You were invited by someone to use Cabble, an app for personal car sharing.
    Install the app or open the in-app link to get started.
</p>

<form action="https://www.cabbleapp.com/">
    <input type="submit" value="Download the Cabble app" />
</form>

<form action="" id="code-form" style="display: none;">
    <input type="submit" value="Redeem code" />
</form>

</body>
</html>
